(this["webpackJsonpreaktor-summer-2021-pre-assignment"]=this["webpackJsonpreaktor-summer-2021-pre-assignment"]||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(16),a=n.n(r),i=n(18),s=n(4),o=n(0),u=function(e){var t=e.productType,n=e.handleProductTypeChange;return Object(o.jsxs)("div",{id:"filterProductsContainer",children:[Object(o.jsx)("h2",{children:"Shows products by category type"}),Object(o.jsx)("label",{htmlFor:"products",children:"Please select a category. It takes some time for the selection to take effect."}),Object(o.jsx)("br",{}),Object(o.jsxs)("select",{name:"products",onChange:n,value:t,children:[Object(o.jsx)("option",{defaultValue:!0,disabled:!0,hidden:!0,style:{display:"none"},value:""}),Object(o.jsx)("option",{value:"gloves",children:"gloves"}),Object(o.jsx)("option",{value:"facemasks",children:"facemasks"}),Object(o.jsx)("option",{value:"beanies",children:"beanies"})]})]})},d=function(e){var t=e.productsAndAvailabilities,n=e.productType,c=function(){return"gloves"===n?(console.log("productsAndAvailabilities[0] in renderProducts function:",t[0]),t[0]):"facemasks"===n?(console.log("productsAndAvailabilities[1] in renderProducts function:",t[1]),t[1]):"beanies"===n?(console.log("productsAndAvailabilities[2] in renderProducts function:",t[2]),t[2]):Object(o.jsx)("tr",{children:Object(o.jsx)("td",{children:"Loading product data. Please wait."})})};return Object(o.jsx)("div",{id:"productListContainer",children:""!==n?Object(o.jsxs)("table",{children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"id"}),Object(o.jsx)("th",{children:"type"}),Object(o.jsx)("th",{children:"product name"}),Object(o.jsx)("th",{children:"color"}),Object(o.jsx)("th",{children:"manufacturer"}),Object(o.jsx)("th",{children:"price"}),Object(o.jsx)("th",{children:"availability"})]})}),Object(o.jsx)("tbody",{children:c()})]}):void 0})},l=n(17),j=n(6),b=n.n(j),p=function(e){return Promise.all([b.a.get(e,{params:{category:"gloves"}}),b.a.get(e,{params:{category:"facemasks"}}),b.a.get(e,{params:{category:"beanies"}})]).then((function(e){return e.map((function(e){return e.data}))}))},h=function(e){var t,n=[],c=Object(l.a)(e);try{for(c.s();!(t=c.n()).done;){var r=t.value;-1===n.indexOf(r)&&n.push(r)}}catch(a){c.e(a)}finally{c.f()}return n},f=function(e,t){var n=function(e){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:e.id},e.id),Object(o.jsx)("td",{children:e.type},e.type),Object(o.jsx)("td",{children:e.name},e.name),Object(o.jsx)("td",{children:e.color.map((function(e){return"".concat(e," ")}))},e.color),Object(o.jsx)("td",{children:e.manufacturer},e.manufacturer),Object(o.jsx)("td",{children:e.price},e.price),Object(o.jsx)("td",{children:t.get(e.manufacturer).filter((function(t){return t.id===e.id.toUpperCase()})).map((function(e){return e.DATAPAYLOAD.substring(e.DATAPAYLOAD.search("<INSTOCKVALUE>")+14,e.DATAPAYLOAD.search("</INSTOCKVALUE>"))}))[0].toLowerCase()},e.availability)]},e.id)};return e.map((function(e){return e.map(n)}))},O=function(e,t){for(var n=new Map,c=0;c<e.length;c++)n.set(e[c],t[c]);return n},m=function(e,t){var n=e.map((function(e){return function(e){return b.a.get(t,{params:{manufacturer:e}})}(e)}));return Promise.all(n).then((function(e){return e.map((function(e){return e.data}))}))},x=(n(42),function(){var e="https://reaktor-2021-duukkis8d.herokuapp.com/api",t=Object(c.useState)([]),n=Object(s.a)(t,2),r=n[0],a=n[1],l=Object(c.useState)(""),j=Object(s.a)(l,2),b=j[0],x=j[1],v=Object(c.useState)([]),g=Object(s.a)(v,2),y=g[0],A=g[1];Object(c.useEffect)((function(){p(e).then((function(e){var t;a(e),A(h((t=[]).concat.apply(t,Object(i.a)(e)).map((function(e){return e.manufacturer}))))}))}),[]);var P=Object(c.useState)(new Map),k=Object(s.a)(P,2),C=k[0],T=k[1];Object(c.useEffect)((function(){m(y,e).then((function(e){var t=O(y,e);T(t)}))}),[y]);var L=Object(c.useState)([]),w=Object(s.a)(L,2),S=w[0],D=w[1];Object(c.useEffect)((function(){D(f(r,C))}),[C]);var E=function(e){x(e.target.value)};return Object(o.jsxs)("div",{id:"appContainer",children:[Object(o.jsx)("h1",{children:"Product list"}),"undefined"!==typeof S&&S.length>0?Object(o.jsxs)("div",{id:"filterProductsAndProductListContainer",children:[Object(o.jsx)(u,{productType:b,handleProductTypeChange:E}),Object(o.jsx)(d,{productsAndAvailabilities:S,productType:b})]}):Object(o.jsx)("p",{children:"Loading product data. Please wait."})]})});a.a.render(Object(o.jsx)(x,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.ced99162.chunk.js.map