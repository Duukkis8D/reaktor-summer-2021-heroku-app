(this["webpackJsonpreaktor-summer-2021-pre-assignment"]=this["webpackJsonpreaktor-summer-2021-pre-assignment"]||[]).push([[0],{40:function(e,t,c){},41:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c(2),a=c(15),i=c.n(a),o=c(4),s=function(e){var t=e.productType,c=e.handleProductTypeChange;return Object(r.jsxs)("div",{id:"filterProductsContainer",children:[Object(r.jsx)("h2",{children:"Shows products by category type"}),Object(r.jsx)("label",{htmlFor:"products",children:"Please select an option. It takes some time for the selection to take affect."}),Object(r.jsx)("br",{}),Object(r.jsxs)("select",{name:"products",onChange:c,value:t,children:[Object(r.jsx)("option",{defaultValue:!0,disabled:!0,hidden:!0,style:{display:"none"},value:""}),Object(r.jsx)("option",{value:"gloves",children:"gloves"}),Object(r.jsx)("option",{value:"facemasks",children:"facemasks"}),Object(r.jsx)("option",{value:"beanies",children:"beanies"})]})]})},d=function(e){var t=e.products,c=e.productType,n=function(){return"gloves"===c?t[0].map((function(e){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:e.id},e.id),Object(r.jsx)("td",{children:e.type},e.type),Object(r.jsx)("td",{children:e.name},e.name),Object(r.jsx)("td",{children:e.color.map((function(e){return"".concat(e," ")}))},e.color),Object(r.jsx)("td",{children:e.manufacturer},e.manufacturer),Object(r.jsx)("td",{children:e.price},e.price)]},e.id)})):"facemasks"===c?t[1].map((function(e){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:e.id},e.id),Object(r.jsx)("td",{children:e.type},e.type),Object(r.jsx)("td",{children:e.name},e.name),Object(r.jsx)("td",{children:e.color.map((function(e){return"".concat(e," ")}))},e.color),Object(r.jsx)("td",{children:e.manufacturer},e.manufacturer),Object(r.jsx)("td",{children:e.price},e.price)]},e.id)})):"beanies"===c?t[2].map((function(e){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:e.id},e.id),Object(r.jsx)("td",{children:e.type},e.type),Object(r.jsx)("td",{children:e.name},e.name),Object(r.jsx)("td",{children:e.color.map((function(e){return"".concat(e," ")}))},e.color),Object(r.jsx)("td",{children:e.manufacturer},e.manufacturer),Object(r.jsx)("td",{children:e.price},e.price)]},e.id)})):Object(r.jsx)("tr",{children:Object(r.jsx)("td",{children:"Loading product data. Please wait."})})};return Object(r.jsx)("div",{id:"productListContainer",children:""!==c?Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"id"}),Object(r.jsx)("th",{children:"type"}),Object(r.jsx)("th",{children:"product name"}),Object(r.jsx)("th",{children:"color"}),Object(r.jsx)("th",{children:"manufacturer"}),Object(r.jsx)("th",{children:"price"}),Object(r.jsx)("th",{children:"availability"})]})}),Object(r.jsx)("tbody",{children:n()})]}):void 0})},u=c(16),l=c(3),j=c.n(l),p=function(e){return Promise.all([j.a.get(e,{params:{category:"gloves"}}),j.a.get(e,{params:{category:"facemasks"}}),j.a.get(e,{params:{category:"beanies"}})])},b=function(e){var t,c=[],r=Object(u.a)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;-1===c.indexOf(n)&&c.push(n)}}catch(a){r.e(a)}finally{r.f()}return c},h=function(e,t){return Promise.all(function(e,t){var c=[];return e.forEach((function(e){c.push(j.a.get(t,{params:{manufacturer:e}})),console.log("product manufacturer from getProductAvailabilityPromises function: ",e)})),console.log("productAvailabilityPromises Array object: ",c),c}(e,t))},f=(c(40),function(){var e="/api",t=Object(n.useState)([]),c=Object(o.a)(t,2),a=c[0],i=c[1],u=Object(n.useState)(""),l=Object(o.a)(u,2),j=l[0],f=l[1],O=Object(n.useState)([]),x=Object(o.a)(O,2),m=x[0],v=x[1];Object(n.useEffect)((function(){console.log("productManufacturers in the beginning of useEffect: ",m),p(e).then((function(e){var t;console.log("all products (headers, data etc):",e);var c=[];e.forEach((function(e){c.push(e.data)})),console.log("all products (only data):",c),i(c);var r=b((t=[]).concat.apply(t,c).map((function(e){return e.manufacturer})));v(r),console.log("productManufacturers after the server response and setters: ",m)}))}),[]),console.log("productManufacturers after useEffect: ",m);var g=Object(n.useState)(new Map),y=Object(o.a)(g,2),P=y[0],E=y[1];Object(n.useEffect)((function(){h(m,e).then((function(e){var t=new Map;e.forEach((function(c){m.forEach((function(r){console.log("response.forEach( availabilities => { productManufacturers.forEach( productManufacturer => {","response: ",e,"response.data: ",e.data,"availabilities: ",c,"availabilities.data: ",c.data,"productManufacturer: ",r),t.set(r,c.data)}))})),E(t),console.log("productAvailabilities Map object: ",P)}))}),[m]);var k=function(e){f(e.target.value)};return Object(r.jsxs)("div",{id:"appContainer",children:[Object(r.jsx)("h1",{children:"Product list"}),"undefined"!==typeof a&&a.length>0?Object(r.jsxs)("div",{id:"filterProductsAndProductListContainer",children:[Object(r.jsx)(s,{productType:j,handleProductTypeChange:k}),Object(r.jsx)(d,{products:a,productType:j})]}):Object(r.jsx)("p",{children:"Loading product data. Please wait."})]})});i.a.render(Object(r.jsx)(f,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.50c69803.chunk.js.map